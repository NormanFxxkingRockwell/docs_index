{
  "doc_id": "arkts-apis-avsession-AVCastController",
  "title": "Interface (AVCastController)",
  "path": "zh-cn/application-dev/reference/apis-avsession-kit/arkts-apis-avsession-AVCastController.md",
  "relative_path": "../../docs/zh-cn/application-dev/reference/apis-avsession-kit/arkts-apis-avsession-AVCastController.md",
  "metadata": {
    "kit": "AVSession Kit",
    "subsystem": "Multimedia",
    "owner": "@ccfriend; @liao_qian",
    "designer": "@ccfriend",
    "tester": "@chenmingxi1_huawei",
    "adviser": "@w_Machine_cc"
  },
  "summary": "AVSession Kit Multimedia 模块的 Interface (AVCastController)，提供相关接口和功能说明。",
  "structure": {
    "title": "Interface (AVCastController)",
    "sections": [
      {
        "section_id": "section-1",
        "title": "导入模块",
        "level": 2,
        "line_start": 16,
        "line_end": 21,
        "summary": "```ts\nimport { avSession } from '@kit.AVSessionKit';\n```"
      },
      {
        "section_id": "section-2",
        "title": "getAVPlaybackState<sup>10+</sup>",
        "level": 2,
        "line_start": 22,
        "line_end": 57,
        "summary": "getAVPlaybackState(callback: AsyncCallback\\<AVPlaybackState>): void\n\n获取当前的远端播放状态。结果通过callback异步回调方式"
      },
      {
        "section_id": "section-3",
        "title": "getAVPlaybackState<sup>10+</sup>",
        "level": 2,
        "line_start": 58,
        "line_end": 93,
        "summary": "getAVPlaybackState(): Promise\\<AVPlaybackState>\n\n获取当前的远端播放状态。结果通过Promise异步回调方式返回。\n\n**原子化服务API：** 从A"
      },
      {
        "section_id": "section-4",
        "title": "getSupportedDecoders<sup>19+</sup>",
        "level": 2,
        "line_start": 94,
        "line_end": 132,
        "summary": "getSupportedDecoders(): Promise\\<Array\\<DecoderType>>\n\n获取当前远端设备的解码方式。使用Promise异步回调。\n\n**原子化服务API：**"
      },
      {
        "section_id": "section-5",
        "title": "getRecommendedResolutionLevel<sup>19+</sup>",
        "level": 2,
        "line_start": 133,
        "line_end": 175,
        "summary": "getRecommendedResolutionLevel(decoderType: DecoderType): Promise\\<ResolutionLevel>\n\n通过传递解码方式，获取推荐的分"
      },
      {
        "section_id": "section-6",
        "title": "getSupportedHdrCapabilities<sup>19+</sup>",
        "level": 2,
        "line_start": 176,
        "line_end": 215,
        "summary": "getSupportedHdrCapabilities(): Promise\\<Array\\<hdrCapability.HDRFormat>>\n\n获取当前的远端设备所支持的HDR能力。使用Prom"
      },
      {
        "section_id": "section-7",
        "title": "getSupportedPlaySpeeds<sup>19+</sup>",
        "level": 2,
        "line_start": 216,
        "line_end": 254,
        "summary": "getSupportedPlaySpeeds(): Promise\\<Array\\<number>>\n\n获取当前的远端设备所支持倍速播放列表。使用Promise异步回调。\n\n**原子化服务API：*"
      },
      {
        "section_id": "section-8",
        "title": "sendControlCommand<sup>10+</sup>",
        "level": 2,
        "line_start": 255,
        "line_end": 301,
        "summary": "sendControlCommand(command: AVCastControlCommand): Promise\\<void>\n\n通过控制器发送命令到其对应的会话。结果通过Promise异步回调"
      },
      {
        "section_id": "section-9",
        "title": "sendControlCommand<sup>10+</sup>",
        "level": 2,
        "line_start": 302,
        "line_end": 342,
        "summary": "sendControlCommand(command: AVCastControlCommand, callback: AsyncCallback\\<void>): void\n\n通过会话控制器发送命"
      },
      {
        "section_id": "section-10",
        "title": "sendCustomData<sup>20+</sup>",
        "level": 2,
        "line_start": 343,
        "line_end": 380,
        "summary": "sendCustomData(data: Record\\<string, Object>): Promise\\<void>\n\n发送私有数据到远端设备。使用Promise异步回调。\n\n**原子化服务A"
      },
      {
        "section_id": "section-11",
        "title": "prepare<sup>10+</sup>",
        "level": 2,
        "line_start": 381,
        "line_end": 437,
        "summary": "prepare(item: AVQueueItem, callback: AsyncCallback\\<void>): void\n\n准备播放媒体资源，即进行播放资源的加载和缓冲。结果通过callba"
      },
      {
        "section_id": "section-12",
        "title": "prepare<sup>10+</sup>",
        "level": 2,
        "line_start": 438,
        "line_end": 500,
        "summary": "prepare(item: AVQueueItem): Promise\\<void>\n\n准备播放媒体资源，即进行播放资源的加载和缓冲。结果通过Promise异步回调方式返回。\n\n\n**原子化服务AP"
      },
      {
        "section_id": "section-13",
        "title": "start<sup>10+</sup>",
        "level": 2,
        "line_start": 501,
        "line_end": 558,
        "summary": "start(item: AVQueueItem, callback: AsyncCallback\\<void>): void\n\n启动播放某个媒体资源。结果通过callback异步回调方式返回。\n\n*"
      },
      {
        "section_id": "section-14",
        "title": "start<sup>10+</sup>",
        "level": 2,
        "line_start": 559,
        "line_end": 620,
        "summary": "start(item: AVQueueItem): Promise\\<void>\n\n启动播放某个媒体资源。结果通过Promise异步回调方式返回。\n\n**原子化服务API：** 从API versi"
      },
      {
        "section_id": "section-15",
        "title": "getCurrentItem<sup>10+</sup>",
        "level": 2,
        "line_start": 621,
        "line_end": 656,
        "summary": "getCurrentItem(callback: AsyncCallback\\<AVQueueItem>): void\n\n获取当前投播的资源信息。结果通过callback异步回调方式返回。\n\n**系"
      },
      {
        "section_id": "section-16",
        "title": "getCurrentItem<sup>10+</sup>",
        "level": 2,
        "line_start": 657,
        "line_end": 692,
        "summary": "getCurrentItem(): Promise\\<AVQueueItem>\n\n获取当前投播的资源信息。结果通过Promise异步回调方式返回。\n\n**原子化服务API：** 从API versi"
      },
      {
        "section_id": "section-17",
        "title": "getValidCommands<sup>11+</sup>",
        "level": 2,
        "line_start": 693,
        "line_end": 728,
        "summary": "getValidCommands(callback: AsyncCallback<Array\\<AVCastControlCommandType>>): void\n\n获取当前支持的命令。结果通过ca"
      },
      {
        "section_id": "section-18",
        "title": "getValidCommands<sup>11+</sup>",
        "level": 2,
        "line_start": 729,
        "line_end": 762,
        "summary": "getValidCommands(): Promise<Array\\<AVCastControlCommandType>>\n\n获取当前支持的命令。结果通过Promise异步回调方式返回。\n\n**系统"
      },
      {
        "section_id": "section-19",
        "title": "processMediaKeyResponse<sup>12+</sup>",
        "level": 2,
        "line_start": 763,
        "line_end": 807,
        "summary": "processMediaKeyResponse(assetId: string, response: Uint8Array): Promise\\<void>\n\n在线DRM资源投播时，处理许可证响应。"
      },
      {
        "section_id": "section-20",
        "title": "release<sup>11+</sup>",
        "level": 2,
        "line_start": 808,
        "line_end": 843,
        "summary": "release(callback: AsyncCallback\\<void>): void\n\n销毁当前controller，结果通过callback异步回调方式返回。\n\n**系统能力：** Syst"
      },
      {
        "section_id": "section-21",
        "title": "release<sup>11+</sup>",
        "level": 2,
        "line_start": 844,
        "line_end": 880,
        "summary": "release(): Promise\\<void>\n\n销毁当前controller。结果通过Promise异步回调方式返回。\n\n**原子化服务API：** 从API version 12开始，该接口"
      },
      {
        "section_id": "section-22",
        "title": "on('playbackStateChange')<sup>10+</sup>",
        "level": 2,
        "line_start": 881,
        "line_end": 922,
        "summary": "on(type: 'playbackStateChange', filter: Array\\<keyof AVPlaybackState> | 'all', callback: (state: AV"
      },
      {
        "section_id": "section-23",
        "title": "off('playbackStateChange')<sup>10+</sup>",
        "level": 2,
        "line_start": 923,
        "line_end": 954,
        "summary": "off(type: 'playbackStateChange', callback?: (state: AVPlaybackState) => void): void\n\n取消播放状态变化事件监听。指"
      },
      {
        "section_id": "section-24",
        "title": "on('mediaItemChange')<sup>10+</sup>",
        "level": 2,
        "line_start": 955,
        "line_end": 990,
        "summary": "on(type: 'mediaItemChange', callback: Callback\\<AVQueueItem>): void\n\n设置投播当前播放媒体内容的监听事件。使用callback异步"
      },
      {
        "section_id": "section-25",
        "title": "off('mediaItemChange')<sup>10+</sup>",
        "level": 2,
        "line_start": 991,
        "line_end": 1021,
        "summary": "off(type: 'mediaItemChange'): void\n\n取消设置投播当前播放媒体内容事件监听。指定callback，可取消对应监听；未指定callback，取消所有事件监听。\n\n**"
      },
      {
        "section_id": "section-26",
        "title": "on('playNext')<sup>10+</sup>",
        "level": 2,
        "line_start": 1022,
        "line_end": 1057,
        "summary": "on(type: 'playNext', callback: Callback\\<void>): void\n\n设置播放下一首资源的监听事件。\n\n每个指令支持注册多个回调，如果需要只执行最新监听，需要"
      },
      {
        "section_id": "section-27",
        "title": "off('playNext')<sup>10+</sup>",
        "level": 2,
        "line_start": 1058,
        "line_end": 1088,
        "summary": "off(type: 'playNext'): void\n\n取消设置播放下一首资源事件监听。指定callback，可取消对应监听；未指定callback，取消所有事件监听。\n\n**原子化服务API：*"
      },
      {
        "section_id": "section-28",
        "title": "on('playPrevious')<sup>10+</sup>",
        "level": 2,
        "line_start": 1089,
        "line_end": 1124,
        "summary": "on(type: 'playPrevious', callback: Callback\\<void>): void\n\n设置播放上一首资源的监听事件。\n\n每个指令支持注册多个回调，如果需要只执行最新监"
      },
      {
        "section_id": "section-29",
        "title": "off('playPrevious')<sup>10+</sup>",
        "level": 2,
        "line_start": 1125,
        "line_end": 1155,
        "summary": "off(type: 'playPrevious'): void\n\n取消设置播放上一首资源事件监听。指定callback，可取消对应监听；未指定callback，取消所有事件监听。\n\n**原子化服务A"
      },
      {
        "section_id": "section-30",
        "title": "on('requestPlay')<sup>11+</sup>",
        "level": 2,
        "line_start": 1156,
        "line_end": 1189,
        "summary": "on(type: 'requestPlay', callback: Callback\\<AVQueueItem>): void\n\n设置请求播放的监听事件。\n\n每个指令支持注册多个回调，如果需要只执行"
      },
      {
        "section_id": "section-31",
        "title": "off('requestPlay')<sup>11+</sup>",
        "level": 2,
        "line_start": 1190,
        "line_end": 1219,
        "summary": "off(type: 'requestPlay', callback?: Callback\\<AVQueueItem>): void\n\n取消设置请求播放事件监听。指定callback，可取消对应监听；"
      },
      {
        "section_id": "section-32",
        "title": "on('endOfStream')<sup>11+</sup>",
        "level": 2,
        "line_start": 1220,
        "line_end": 1253,
        "summary": "on(type: 'endOfStream', callback: Callback\\<void>): void\n\n设置播放结束的监听事件。\n\n每个指令支持注册多个回调，如果需要只执行最新监听，需要"
      },
      {
        "section_id": "section-33",
        "title": "off('endOfStream')<sup>11+</sup>",
        "level": 2,
        "line_start": 1254,
        "line_end": 1283,
        "summary": "off(type: 'endOfStream', callback?: Callback\\<void>): void\n\n取消设置播放结束事件监听。指定callback，可取消对应监听；未指定call"
      },
      {
        "section_id": "section-34",
        "title": "on('seekDone')<sup>10+</sup>",
        "level": 2,
        "line_start": 1284,
        "line_end": 1319,
        "summary": "on(type: 'seekDone', callback: Callback\\<number>): void\n\n设置seek结束的监听事件。\n\n每个指令支持注册多个回调，如果需要只执行最新监听，需"
      },
      {
        "section_id": "section-35",
        "title": "off('seekDone')<sup>10+</sup>",
        "level": 2,
        "line_start": 1320,
        "line_end": 1350,
        "summary": "off(type: 'seekDone'): void\n\n取消设置seek结束事件监听。指定callback，可取消对应监听；未指定callback，取消所有事件监听。\n\n**原子化服务API：**"
      },
      {
        "section_id": "section-36",
        "title": "on('validCommandChange')<sup>11+</sup>",
        "level": 2,
        "line_start": 1351,
        "line_end": 1386,
        "summary": "on(type: 'validCommandChange', callback: Callback\\<Array\\<AVCastControlCommandType>>)\n\n会话支持的有效命令变化监"
      },
      {
        "section_id": "section-37",
        "title": "off('validCommandChange')<sup>11+</sup>",
        "level": 2,
        "line_start": 1387,
        "line_end": 1417,
        "summary": "off(type: 'validCommandChange', callback?: Callback\\<Array\\<AVCastControlCommandType>>)\n\n取消会话有效命令变化"
      },
      {
        "section_id": "section-38",
        "title": "on('videoSizeChange')<sup>12+</sup>",
        "level": 2,
        "line_start": 1418,
        "line_end": 1450,
        "summary": "on(type: 'videoSizeChange', callback: (width: number, height: number) => void): void\n\n媒体控制器监听视频尺寸变化变"
      },
      {
        "section_id": "section-39",
        "title": "off('videoSizeChange')<sup>12+</sup>",
        "level": 2,
        "line_start": 1451,
        "line_end": 1479,
        "summary": "off(type: 'videoSizeChange'): void\n\n取消视频尺寸事件监听。指定callback，可取消对应监听；未指定callback，取消所有事件监听。\n\n系统能力： Syst"
      },
      {
        "section_id": "section-40",
        "title": "on('error')<sup>10+</sup>",
        "level": 2,
        "line_start": 1480,
        "line_end": 1523,
        "summary": "on(type: 'error', callback: ErrorCallback): void\n\n监听远端播放器的错误事件，该事件仅用于错误提示，不需要用户停止播控动作。\n\n每个指令支持注册多个回"
      },
      {
        "section_id": "section-41",
        "title": "off('error')<sup>10+</sup>",
        "level": 2,
        "line_start": 1524,
        "line_end": 1560,
        "summary": "off(type: 'error'): void\n\n取消播放的错误事件监听。指定callback，可取消对应监听；未指定callback，取消所有事件监听。\n\n**原子化服务API：** 从API"
      },
      {
        "section_id": "section-42",
        "title": "on('keyRequest')<sup>12+</sup>",
        "level": 2,
        "line_start": 1561,
        "line_end": 1598,
        "summary": "on(type: 'keyRequest', callback: KeyRequestCallback): void\n\n在线DRM资源投播时，设置许可证请求的事件监听。\n\n每个指令支持注册多个回调，"
      },
      {
        "section_id": "section-43",
        "title": "off('keyRequest')<sup>12+</sup>",
        "level": 2,
        "line_start": 1599,
        "line_end": 1630,
        "summary": "off(type: 'keyRequest', callback?: KeyRequestCallback): void\n\n取消许可证请求事件监听。指定callback，可取消对应监听；未指定cal"
      },
      {
        "section_id": "section-44",
        "title": "on('castControlGenericError')<sup>13+</sup>",
        "level": 2,
        "line_start": 1631,
        "line_end": 1679,
        "summary": "on(type: 'castControlGenericError', callback: ErrorCallback): void\n\n监听投播通用错误事件。\n\n每个指令支持注册多个回调，如果需要只"
      },
      {
        "section_id": "section-45",
        "title": "off('castControlGenericError')<sup>13+</sup>",
        "level": 2,
        "line_start": 1680,
        "line_end": 1710,
        "summary": "off(type: 'castControlGenericError', callback?: ErrorCallback): void\n\n取消投播通用的错误事件监听。指定callback，可取消对"
      },
      {
        "section_id": "section-46",
        "title": "on('castControlIoError')<sup>13+</sup>",
        "level": 2,
        "line_start": 1711,
        "line_end": 1762,
        "summary": "on(type: 'castControlIoError', callback: ErrorCallback): void\n\n监听投播输入/输出的错误事件。\n\n每个指令支持注册多个回调，如果需要只执"
      },
      {
        "section_id": "section-47",
        "title": "off('castControlIoError')<sup>13+</sup>",
        "level": 2,
        "line_start": 1763,
        "line_end": 1793,
        "summary": "off(type: 'castControlIoError', callback?: ErrorCallback): void\n\n取消投播输入/输出的错误事件监听。指定callback，可取消对应监"
      },
      {
        "section_id": "section-48",
        "title": "on('castControlParsingError')<sup>13+</sup>",
        "level": 2,
        "line_start": 1794,
        "line_end": 1833,
        "summary": "on(type: 'castControlParsingError', callback: ErrorCallback): void\n\n监听投播解析的错误事件。\n\n每个指令支持注册多个回调，如果需要"
      },
      {
        "section_id": "section-49",
        "title": "off('castControlParsingError')<sup>13+</sup>",
        "level": 2,
        "line_start": 1834,
        "line_end": 1864,
        "summary": "off(type: 'castControlParsingError', callback?: ErrorCallback): void\n\n取消投播解析的错误事件监听。指定callback，可取消对"
      },
      {
        "section_id": "section-50",
        "title": "on('castControlDecodingError')<sup>13+</sup>",
        "level": 2,
        "line_start": 1865,
        "line_end": 1905,
        "summary": "on(type: 'castControlDecodingError', callback: ErrorCallback): void\n\n监听投播解码的错误事件。\n\n每个指令支持注册多个回调，如果需"
      },
      {
        "section_id": "section-51",
        "title": "off('castControlDecodingError')<sup>13+</sup>",
        "level": 2,
        "line_start": 1906,
        "line_end": 1936,
        "summary": "off(type: 'castControlDecodingError', callback?: ErrorCallback): void\n\n取消投播解码的错误事件监听。指定callback，可取消"
      },
      {
        "section_id": "section-52",
        "title": "on('castControlAudioRendererError')<sup>13+</sup>",
        "level": 2,
        "line_start": 1937,
        "line_end": 1974,
        "summary": "on(type: 'castControlAudioRendererError', callback: ErrorCallback): void\n\n监听投播音频渲染器的错误事件。\n\n每个指令支持注册"
      },
      {
        "section_id": "section-53",
        "title": "off('castControlAudioRendererError')<sup>13+</sup>",
        "level": 2,
        "line_start": 1975,
        "line_end": 2005,
        "summary": "off(type: 'castControlAudioRendererError', callback?: ErrorCallback): void\n\n取消投播音频渲染器的错误事件监听。指定call"
      },
      {
        "section_id": "section-54",
        "title": "on('castControlDrmError')<sup>13+</sup>",
        "level": 2,
        "line_start": 2006,
        "line_end": 2050,
        "summary": "on(type: 'castControlDrmError', callback: ErrorCallback): void\n\n监听投播drm的错误事件。\n\n每个指令支持注册多个回调，如果需要只执行"
      },
      {
        "section_id": "section-55",
        "title": "off('castControlDrmError')<sup>13+</sup>",
        "level": 2,
        "line_start": 2051,
        "line_end": 2081,
        "summary": "off(type: 'castControlDrmError', callback?: ErrorCallback): void\n\n取消投播drm的错误事件监听。指定callback，可取消对应监听"
      },
      {
        "section_id": "section-56",
        "title": "on('customDataChange')<sup>20+</sup>",
        "level": 2,
        "line_start": 2082,
        "line_end": 2114,
        "summary": "on(type: 'customDataChange', callback: Callback\\<Record\\<string, Object>>): void\n\n注册从远端设备发送的自定义数据的监"
      },
      {
        "section_id": "section-57",
        "title": "off('customDataChange')<sup>20+</sup>",
        "level": 2,
        "line_start": 2115,
        "line_end": 2145,
        "summary": "off(type: 'customDataChange', callback?: Callback\\<Record\\<string, Object>>): void\n\n取消对自定义数据的监听。\n\n*"
      }
    ]
  }
}